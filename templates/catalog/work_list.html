{% extends "_base.html" %}
{% block content %}
    <div class="container mt-4">
        <h1 class="text-center mb-1">{{ heading }}</h1>
        <p class="text-center" style="font-size: 1em;">{{ sub_heading }}</p>
    

        <div class="text-center mb-4">
            <a href="{% url 'work_list' %}"
               class="btn btn-sm btn-outline-primary {% if view_type == 'works' %}active{% endif %}">Works</a>
            <a href="{% url 'bookset_list' %}"
               class="btn btn-sm btn-outline-primary {% if view_type == 'booksets' %}active{% endif %}">Book Sets</a>
            <a href="{% url 'catalog_all' %}"
               class="btn btn-sm btn-outline-primary {% if view_type == 'all' %}active{% endif %}">All</a>
        </div>
        <div class="container mt-3 list-container">

            {% if items %}
                <div class="list-group shadow-sm">
                    {% for item in items %}
                        <a href="{{ item.get_absolute_url }}"
                           class="list-group-item list-group-item-action d-flex align-items-center py-2 catalog-item">
                            {% if view_type == "booksets" %}
                                {% if item.get_primary_image %}
                                    <img src="{{ item.get_primary_image.image.url }}"
                                         alt="{{ item.title }}"
                                         class="me-3 rounded"
                                         style="width:70px; height:100px; object-fit:cover;">
                                {% else %}
                                    <div class="me-3 d-flex align-items-center justify-content-center bg-light border rounded text-muted"
                                         style="width:70px; height:100px; font-size:.8em;">
                                        No<br>Image
                                    </div>
                                {% endif %}
                            {% endif %}

                            <div class="flex-fill">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0 fw-semibold">
                                        {{ item.title }}<span class="small fw-lighter">{% if item.kind == "BookSet" %}
                                        {% if item.is_box_set %}
                                            (Box Set)
                                        {% else %}
                                            (Set){% endif %}
                                    {% else %} ({{ item.get_work_type_display }}){% endif %}</span></h6>
                                    <i class="bi bi-chevron-right text-muted"></i>
                                </div>
                                <div><span class="small fw-light">{{ item.author }}</span></div>

                                {% if view_type == "booksets" or item.volumes.exists %}
                                    <small class="text-muted">
                                        {{ item.volumes.count }} volume{{ item.volumes.count|pluralize }}
                                    </small>
                                {% endif %}
                            </div>
                        </a>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-center text-muted mt-5">No entries yet.</p>
            {% endif %}
        </div>
    </div>
{% endblock %}




{# card grid layout #}
{#{% extends "_base.html" %}#}
{#{% block content %}#}
{#<div class="container mt-4">#}
{#    <h1 class="text-center mb-4">{{ heading }}</h1>#}
{##}
{#    <div class="text-center mb-4">#}
{#        <a href="{% url 'work_list' %}" class="btn btn-sm btn-outline-primary {% if view_type == 'works' %}active{% endif %}">Works</a>#}
{#        <a href="{% url 'bookset_list' %}" class="btn btn-sm btn-outline-primary {% if view_type == 'booksets' %}active{% endif %}">Book Sets</a>#}
{#        <a href="{% url 'catalog_all' %}" class="btn btn-sm btn-outline-primary {% if view_type == 'all' %}active{% endif %}">All</a>#}
{#    </div>#}
{##}
{#    <div class="row">#}
{#        {% for item in items %}#}
{#            <div class="col-md-3 mb-4">#}
{#                <div class="card h-100 shadow-sm">#}
{#                    {% if item.get_primary_image %}#}
{#                        <img src="{{ item.get_primary_image.image.url }}" class="card-img-top" alt="{{ item.display_title }}">#}
{#                    {% endif %}#}
{#                    <div class="card-body text-center">#}
{#                        <h6 class="card-title">{{ item.title }}</h6>#}
{##}
{#                        {% if view_type == "booksets" or item.volumes.exists %}#}
{#                            <p class="text-muted small">{{ item.volumes.count }} volume{{ item.volumes.count|pluralize }}</p>#}
{#                        {% endif %}#}
{##}
{#<a href="{{ item.get_absolute_url }}" class="btn btn-sm btn-outline-primary mt-2">Details</a>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        {% empty %}#}
{#            <p>No entries yet.</p>#}
{#        {% endfor %}#}
{#    </div>#}
{#</div>#}
{#{% endblock %}#}


{#{% extends "_base.html" %}#}
{##}
{#{% block content %}#}
{#    <br>#}
{#    <h1 class="display-6 text-center mb-4">Everything</h1>#}
{#    #}
{#    {% for item in items %}#}
{#        <div class="catalog-item">#}
{#            {% with first_volume=item.volumes.all.0 %}#}
{#    {% if first_volume.book_set %}#}
{#        <h2>#}
{#            <a href="{% url 'bookset_detail' first_volume.book_set.pk %}">#}
{#                {{ item.title }}#}
{#            </a>#}
{#            <small>(Set)</small>#}
{#            {% with first_author=first_volume.works.all.0.author %}#}
{#                {% if first_author %}#}
{#                    <span class="text-muted" style="font-size:.85em;">by {{ first_author }}</span>#}
{#                {% endif %}#}
{#            {% endwith %}#}
{#        </h2>#}
{#        {% else %}#}
{#    <h2><a href="{% url 'work_detail' item.pk %}">{{ item.title }}</a>#}
{#        <span class="text-muted" style="font-size:.85em;">by {{ item.author }}</span>#}
{#    </h2>#}
{#    {% endif %}#}
{#{% endwith %}#}
{##}
{#            <ul class="list-unstyled">#}
{#                {% for volume in item.volumes.all %}#}
{#                    <li>#}
{#                        <a href="{% url 'volume_detail' volume.pk %}" style="font-style: italic;">{{ volume }}</a>#}
{#                        <small class="text-muted">#}
{#                            {% if volume.edition %}#}
{#                                ({{ volume.publication_year }}, {{ volume.edition }})#}
{#                            {% else %}#}
{#                                ({{ volume.publication_year }})#}
{#                            {% endif %}#}
{#                        </small>#}
{#                    </li>#}
{#                {% endfor %}#}
{#            </ul>#}
{#        </div>#}
{#    {% endfor %}#}
{#{% endblock content %}#}
{##}
